<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no">
<title>{{ &OPT.title }}</title>
<meta name="keywords" content="{{ &OPT.keywords }}" />
<meta name="description" content="{{ &OPT.description }}" />
<link rel="stylesheet" id="style-css" href="{{ &OPT.theme_github_path }}JustNews/files/style.min3.css" type="text/css" media="all">
<link rel="stylesheet" id="style-css" href="{{ &OPT.theme_github_path }}JustNews/files/style.min4.css" type="text/css" media="all">
<link rel="stylesheet" id="font-awesome-css" href="{{ &OPT.theme_github_path }}JustNews/files/font-awesome.css" type="text/css" media="all">
<link rel="stylesheet" href="{{ &OPT.theme_github_path }}JustNews/files/fonts/fontawesome5pro-all.min.css">
<script type="text/javascript" src="{{ &OPT.theme_github_path }}JustNews/files/jquery.min.js"></script>
<script type="text/javascript" src="{{ &OPT.theme_github_path }}JustNews/files/jquery-migrate.min.js"></script>
<style type="text/css" id="custom-background-css">
    body.custom-background {
        background-image: url("{{ &OPT.bg_img_url }}");
        background-position: left top;
        background-size: auto;
        background-repeat: repeat;
        background-attachment: scroll;
    }
</style>
{{ &OPT.header_code }}
</head>
<body class="home blog custom-background" id="top">
<div id="page">
    <header id="header" class="header">
        <div class="container">
            <div class="row">
                <div class="col-md-3 col-sm-12">
                    <div class="logo">
                        <a href="/" title="{{ &OPT.siteName }}" rel="home">
                            <img src="{{ &OPT.logo }}" alt="{{ &OPT.siteName }}">
                        </a>
                    </div>
                </div>
                <div class="col-md-9 col-sm-12">
                    <div id="navigation" class="navigation">
                        <nav class="navbar navbar-default">
                            <div class="navbar-header">
                                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                                    <span class="sr-only"></span>
                                    <span class="icon-bar"></span>
                                    <span class="icon-bar"></span>
                                    <span class="icon-bar"></span>
                                </button>
                            </div>
                            <div class="navbar-collapse collapse">
                                <ul id="menu-primary" class="nav navbar-nav">
                                    <li class="{{#ifCond currentPage '==' 1}}current-menu-item{{/ifCond}}"><a href="/"><i class="fas fa-home"></i> 首页</a></li>
                                    {{#each widgetMenuList}}
                                    <li class="{{#if children}}menu-item-has-children dropdown{{/if}}">
                                        <a href="{{url}}" {{#if children}}class="dropdown-toggle" data-toggle="dropdown"{{/if}}>
                                            {{#if icon}}<i class="{{icon}}"></i> {{/if}}{{title}}
                                        </a>
                                        {{#if children}}
                                        <ul class="dropdown-menu">
                                            {{#each children}}
                                            <li class="{{#if children}}menu-item-has-children dropdown-submenu{{/if}}">
                                                <a href="{{url}}">
                                                    {{#if icon}}<i class="{{icon}}"></i> {{/if}}{{title}}
                                                </a>
                                                 {{#if children}}
                                                <ul class="dropdown-menu">
                                                    {{#each children}}
                                                    <li><a href="{{url}}">{{#if icon}}<i class="{{icon}}"></i> {{/if}}{{title}}</a></li>
                                                    {{/each}}
                                                </ul>
                                                {{/if}}
                                            </li>
                                            {{/each}}
                                        </ul>
                                        {{/if}}
                                    </li>
                                    {{/each}}
                                </ul>
                            </div>
                        </nav>
                    </div>
                </div>
            </div>
        </div>
    </header>

    {{#if OPT.show_carousel}}
	<div class="container" style="margin-top: 20px;">
		<div id="carousel-example-generic" class="carousel slide" data-ride="carousel">
			<ol class="carousel-indicators">
                {{#each carouselList}}
				<li data-target="#carousel-example-generic" data-slide-to="{{@index}}" class="{{#ifCond @index '==' 0}}active{{/ifCond}}"></li>
                {{/each}}
			</ol>
			<div class="carousel-inner" role="listbox">
                {{#each carouselList}}
				<div class="item {{#ifCond @index '==' 0}}active{{/ifCond}}">
					<a href="{{linkUrl}}" target="_blank"><img src="{{imageUrl}}" alt="Slide {{@index}}"></a>
				</div>
                {{/each}}
			</div>
			<a class="left carousel-control" href="#carousel-example-generic" role="button" data-slide="prev">
				<span class="glyphicon glyphicon-chevron-left" aria-hidden="true"><i class="fas fa-chevron-left"></i></span>
				<span class="sr-only">Previous</span>
			</a>
			<a class="right carousel-control" href="#carousel-example-generic" role="button" data-slide="next">
				<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"><i class="fas fa-chevron-right"></i></span>
				<span class="sr-only">Next</span>
			</a>
		</div>
	</div>
    {{/if}}

    <div id="content" class="site-content">
        <div class="container">
            <div class="row">
                <div class="col-md-9 col-sm-12">
                    <div id="primary" class="content-area">
                        <main id="main" class="site-main" role="main">
                            <div class="block-archive-head"><span><i class="fa fa-th-large"></i> 最新发布</span></div>
                            <div class="row">
                            {{#each articleList}}
                                <div class="col-md-4 col-sm-6">
                                    <article class="post">
                                        <div class="post-thumb">
                                            <a href="/post/{{link}}">
                                                <img class="lazyload" src="{{#if img}}{{img}}{{else}}{{../../OPT.random_img_url}}{{/if}}" data-src="{{#if img}}{{img}}{{else}}{{../../OPT.random_img_url}}{{/if}}" alt="{{title}}" style="height: 150px; object-fit: cover;">
                                            </a>
                                        </div>
                                        <h2 class="post-title">
                                            <a href="/post/{{link}}" rel="bookmark">{{title}}</a>
                                        </h2>
                                        <div class="post-meta">
                                            <span><i class="fa fa-clock-o"></i> {{formatDate createDate}}</span>
                                            <span><i class="fa fa-folder-o"></i> {{#each category}}{{#if @first}}{{else}}, {{/if}}<a href="/category/{{this}}" rel="category tag">{{this}}</a>{{/each}}</span>
                                            <span><i class="fa fa-eye"></i> <span data-post-id="{{link}}"></span></span>
                                        </div>
                                    </article>
                                </div>
                            {{/each}}
                            </div>
                            <div class="clearfix"></div>
                             <div class="pagination">
                                {{#ifCond currentPage '>' 1}}
                                    <a class="prev page-numbers" href="/page/{{subtract currentPage 1}}/"><i class="fa fa-angle-left"></i></a>
                                {{/ifCond}}
                                {{#each pageArr}}
                                    {{#ifCond this '==' ../currentPage}}
                                        <span class="page-numbers current">{{this}}</span>
                                    {{else}}
                                        <a class="page-numbers" href="/page/{{this}}/">{{this}}</a>
                                    {{/ifCond}}
                                {{/each}}
                                {{#ifCond currentPage '<' totalPages}}
                                    <a class="next page-numbers" href="/page/{{add currentPage 1}}/"><i class="fa fa-angle-right"></i></a>
                                {{/ifCond}}
                            </div>
                        </main>
                    </div>
                </div>
                <div class="col-md-3 col-sm-12">
                   <aside id="secondary" class="widget-area" role="complementary">
                        <div id="search-2" class="widget widget_search">
                            <form role="search" method="get" class="search-form" action="/search/">
                                <label>
                                    <span class="screen-reader-text">搜索：</span>
                                    <input type="search" class="search-field" placeholder="搜索…" value="" name="q">
                                </label>
                                <input type="submit" class="search-submit" value="搜索">
                            </form>
                        </div>
                        <div class="widget widget_categories">
                            <h2 class="widget-title"><i class="fa fa-folder-open-o" aria-hidden="true"></i> 分类</h2>
                            <ul>
                            {{#each widgetCategoryList}}
                                <li><a href="/category/{{name}}"><i class="{{icon}}"></i> {{name}}</a></li>
                            {{/each}}
                            </ul>
                        </div>
                        <div class="widget widget_posts">
                            <h2 class="widget-title"><i class="fa fa-random" aria-hidden="true"></i> 随机文章</h2>
                            <ul>
                            {{#each widgetRandomArticleList}}
                                <li><a href="/post/{{link}}">{{title}}</a></li>
                            {{/each}}
                            </ul>
                        </div>
                        <div class="widget widget_tags">
                            <h2 class="widget-title"><i class="fa fa-tags" aria-hidden="true"></i> 标签云</h2>
                            <div class="tagcloud">
                            {{#each widgetTagList}}
                                <a href="/tags/{{name}}" class="tag-link-2 tag-link-position-{{size}}" style="font-size: {{add 8 size}}pt;" title="{{count}}个话题">{{name}}</a>
                            {{/each}}
                            </div>
                        </div>
                        <div class="widget widget_links">
                            <h2 class="widget-title"><i class="fa fa-link" aria-hidden="true"></i> 友情链接</h2>
                            <ul>
                            {{#each widgetLinkList}}
                                <li><a href="{{url}}" target="_blank">{{title}}</a></li>
                            {{/each}}
                            </ul>
                        </div>
                    </aside>
                </div>
            </div>
        </div>
    </div>
    <footer id="footer" class="footer">
        <div class="container">
            <p>{{& OPT.footer_code}}</p>
        </div>
    </footer>
    <div class="go-top" style="display: none;"><a href="#top" title="返回顶部"><i class="fa fa-angle-up"></i></a></div>
</div>
<script type="text/javascript" src="{{ &OPT.theme_github_path }}JustNews/files/main.js"></script>
<script type="text/javascript" src="{{ &OPT.theme_github_path }}JustNews/files/wp-embed.js"></script>
<script>
    document.addEventListener("DOMContentLoaded", function() {
        var postIds = Array.from(document.querySelectorAll('[data-post-id]')).map(function(el) {
            return el.getAttribute('data-post-id');
        });

        if (postIds.length > 0) {
            fetch('/api/views', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ postIds: postIds }),
            })
            .then(response => response.json())
            .then(data => {
                for (var postId in data) {
                    var el = document.querySelector('[data-post-id="' + postId + '"]');
                    if (el) {
                        el.textContent = data[postId];
                    }
                }
            });
        }
    });
</script>
</body>
</html>
